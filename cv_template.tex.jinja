%-----------------------------------------------------------------------------------------------------------------------------------------------%
%	Based on original work by Jitin Nair (2021) - MIT License
%	Significantly modified and customized by Dabeer Ahmad Abdul Azeez (2024)
%
%	Original MIT License applies to the base template:
%	Permission is hereby granted, free of charge, to any person obtaining a copy
%	of this software and associated documentation files (the "Software"), to deal
%	in the Software without restriction, including without limitation the rights
%	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
%	copies of the Software, and to permit persons to whom the Software is
%	furnished to do so, subject to the following conditions:
%	
%	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
%	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
%	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
%
%	Modifications include:
%	- Jinja2 template integration for dynamic content generation
%	- Customized Skills section with categorized structure
%	- Modified Projects section formatting
%	- Integration with Notion API for automated CV updates
%	- Enhanced LaTeX structure for better content organization
%
%-----------------------------------------------------------------------------------------------------------------------------------------------%

%----------------------------------------------------------------------------------------
%	DOCUMENT DEFINITION
%----------------------------------------------------------------------------------------

% Magic comment to force xelatex compilation
%!TEX program = xelatex

% article class because we want to fully customize the page and not use a cv template
\documentclass[a4paper,10pt]{article}

%----------------------------------------------------------------------------------------
%	FONT
%----------------------------------------------------------------------------------------

% Use Open Sans TTF font directly
\usepackage{fontspec}
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{OpenSans}[
    Path = fonts/static/,
    Extension = .ttf,
    UprightFont = OpenSans-Regular,
    BoldFont = OpenSans-Bold,
    ItalicFont = OpenSans-Italic,
    BoldItalicFont = OpenSans-BoldItalic
]

%----------------------------------------------------------------------------------------
%	PACKAGES
%----------------------------------------------------------------------------------------
\usepackage{url}
\usepackage{parskip} 	

\RequirePackage{color}
\RequirePackage{graphicx}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage[scale=0.9, top=0.5in,bottom=0.4in]{geometry}

\usepackage{tabularx}

\usepackage{enumitem}

% centered version of 'X' col. type
\newcolumntype{C}{>{\centering\arraybackslash}X} 

\usepackage{supertabular}
\usepackage{tabularx}
\newlength{\fullcollw}
\setlength{\fullcollw}{0.47\textwidth}

\usepackage{titlesec}				
\usepackage{multicol}
\usepackage{multirow}

\definecolor{accent}{RGB}{79,133,244}
\titleformat{\section}{\fontsize{10}{12}\selectfont\bfseries\raggedright}{}{0em}{}[\titleline{\color{accent}\titlerule[1.2pt]}]
\titlespacing{\section}{0pt}{10pt}{10pt}

\usepackage[unicode, draft=false]{hyperref}
\definecolor{titlebg}{HTML}{F3F4F6}
\hypersetup{colorlinks,breaklinks,urlcolor=accent,linkcolor=accent}

%for social icons
\usepackage{fontawesome5}

%----------------------------------------------------------------------------------------
%	BEGIN DOCUMENT
%----------------------------------------------------------------------------------------
\begin{document}

% non-numbered pages
\pagestyle{empty} 

%----------------------------------------------------------------------------------------
%	TITLE BLOCK
%----------------------------------------------------------------------------------------

{% raw %}
\begingroup\setlength{\fboxsep}{8pt}%
\hypersetup{urlcolor=accent,linkcolor=accent}%
\noindent\makebox[\linewidth][l]{%
  \colorbox{titlebg}{%
    \parbox{\dimexpr\linewidth-2\fboxsep\relax}{%
      \begin{tabularx}{\linewidth}{@{} C @{} }
        \Huge{\textbf{\textcolor{accent}{Dabeer Ahmad} \textcolor{black}{Abdul Azeez}}} \\[7.5pt]
        \href{https://linkedin.com/in/dabeerabdulazeez}{\raisebox{-0.05\height}\faLinkedin\ LinkedIn} \ $|$ \ 
        \href{https://github.com/dabeerazeez}{\raisebox{-0.05\height}\faGithub\ GitHub} \ $|$ \ 
        \href{mailto:dabeerazeez@gmail.com}{\raisebox{-0.05\height}\faEnvelope \ dabeerazeez@gmail.com} \ $|$ \ 
        \raisebox{-0.05\height}\faMobile \ +1 647 719 2948 \
      \end{tabularx}
    }%
  }%
}%
\endgroup
{% endraw %}

%----------------------------------------------------------------------------------------
% SUMMARY OF QUALIFICATIONS
%----------------------------------------------------------------------------------------

\section{SUMMARY OF QUALIFICATIONS}

\begin{itemize}[nosep,after=\strut, leftmargin=1em, itemsep=3pt,label=--]
{% for item in cv_data.get('Summary', []) %}
  \item {{ item | safe }}
{% endfor %}
\end{itemize}

%----------------------------------------------------------------------------------------
% EXPERIENCE / EXTRACURRICULARS / PROJECTS
%----------------------------------------------------------------------------------------

{% for sect in ['Work Experience','Leadership and Other Experience','Projects'] %}
{% set items = cv_data.get(sect, [])|selectattr('is_visible')|list %}
{% if items|length %}
\section{ {{- sect | upper | latex_escape -}} }
{% for item in items %}

{% if sect == 'Projects' %}

% {{ item.name | latex_escape }}
\begin{tabularx}{\linewidth}{@{}X r@{}}
\begin{minipage}[t]{\linewidth}
  \textbf{ {{- item.name | latex_escape -}} }
\end{minipage}
& {% if item.date_display %}
    {{ item.date_display | latex_escape }}
  {% elif item.start_date %}
    {{ (item.start_date ~ ' -- ' ~ (item.end_date or 'Present')) | latex_escape }}
  {% else %}
    {{ (item.end_date or '') | latex_escape }}
  {% endif %}
\end{tabularx}

{% else %}

% {{ item.organization | latex_escape }}{% if item.location %} - {{ item.location | latex_escape }}{% endif %} - {{ item.name | latex_escape }}
\begin{tabularx}{\linewidth}{@{}X r@{}}
\begin{minipage}[t]{\linewidth}
  \textbf{ {{- item.organization | latex_escape -}} }
  {% if item.location %} -- {{ item.location | latex_escape }}{% endif %} \\
  \textbf{ {{- item.name | latex_escape -}} }
\end{minipage}
& {% if item.date_display %}
    {{ item.date_display | latex_escape }}
  {% elif item.start_date %}
    {{ (item.start_date ~ ' -- ' ~ (item.end_date or 'Present')) | latex_escape }}
  {% else %}
    {{ (item.end_date or '') | latex_escape }}
  {% endif %}
\end{tabularx}
{% endif %}

\begin{itemize}[nosep,after=\strut, leftmargin=1em, itemsep=3pt,label=--]
  {{ item.body_latex | replace('}{peer-reviewed publication}', '}{\\textcolor{accent}{peer-reviewed publication}}') | safe }}
\end{itemize}
{% endfor %}
{% endif %}
{% endfor %}

%----------------------------------------------------------------------------------------
% EDUCATION
%----------------------------------------------------------------------------------------

{% set edu = cv_data.get('Education', [])|selectattr('is_visible')|list %}
{% if edu|length %}
\section{EDUCATION}
{% for item in edu %}

% {{ item.organization | latex_escape }}{% if item.location %} - {{ item.location | latex_escape }}{% endif %} - {{ item.name | latex_escape }}
\begin{tabularx}{\linewidth}{@{}X r@{}}
\begin{minipage}[t]{\linewidth}
  \textbf{ {{- item.organization | latex_escape -}} }
  {% if item.location %} -- {{ item.location | latex_escape }}{% endif %} \\
  \textbf{ {{- item.name | latex_escape -}} }
\end{minipage}
& {% if item.date_display %}
    {{ item.date_display | latex_escape }}
  {% elif item.start_date %}
    {{ (item.start_date ~ ' -- ' ~ (item.end_date or 'Present')) | latex_escape }}
  {% else %}
    {{ (item.end_date or '') | latex_escape }}
  {% endif %}
\end{tabularx}

{{ item.body_latex | safe }}
{% endfor %}
{% endif %}

%----------------------------------------------------------------------------------------
% SKILLS
%----------------------------------------------------------------------------------------

{% set skills = cv_data.get('Skills', [])|selectattr('is_visible')|list %}
{% if skills %}
\section{SKILLS \& INTERESTS}
\begin{tabularx}{\linewidth}{@{}l X@{}}
{% for item in skills %}
  \textbf{ {{- item.category | safe -}} } &
  \normalsize{ {{- item.skills | safe -}} } \\
{% endfor %}
\end{tabularx}
{% endif %}

%----------------------------------------------------------------------------------------
% AWARDS
%----------------------------------------------------------------------------------------

{% set awards = cv_data.get('Awards', [])|selectattr('is_visible')|list %}
{% if awards|length %}
\section{AWARDS}
{% for item in awards %}

% {{ item.name | latex_escape }}
\begin{tabularx}{\linewidth}{@{}l X r@{}}
\textbf{ {{- item.name | latex_escape -}} } & \hfill & {% if item.date_display %}
    {{ item.date_display | latex_escape }}
  {% elif item.start_date %}
    {{ (item.start_date ~ ' -- ' ~ (item.end_date or 'Present')) | latex_escape }}
  {% else %}
    {{ (item.end_date or '') | latex_escape }}
  {% endif %} \end{tabularx}

{{ item.body_latex | safe }}
{% if not loop.last %}
\vspace{6pt}

{% endif %}
{% endfor %}
{% endif %}

%----------------------------------------------------------------------------------------
% PUBLICATIONS
%----------------------------------------------------------------------------------------

{% set pubs = cv_data.get('Publications', [])|selectattr('is_visible')|list %}
{% if pubs|length %}
\section{PUBLICATIONS}
{% for item in pubs %}

% {{ item.name | latex_escape }}
{{ item.body_latex | safe }}
{% if not loop.last %}
\vspace{8pt}

{% endif %}
{% endfor %}
{% endif %}

%----------------------------------------------------------------------------------------
% END OF DOCUMENT
%----------------------------------------------------------------------------------------

\vfill
\center{\footnotesize Last updated: \today}

\end{document}